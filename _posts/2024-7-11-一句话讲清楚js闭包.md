---
title: 一句话讲清楚js闭包
date: 2024-7-11 15:20:11 +0800
categories: [javascript]
tags: [js, web]     # TAG names should always be lowercase
---

# 一句话讲清楚js闭包

> **闭包是指在一个函数内部定义的函数（里边这个叫闭包，~~外边叫外包？~~），能够访问其外部函数的变量和参数，即使外部函数已经执行完毕。**


JavaScript 解释器在处理闭包时，并没有将其视为不同于普通函数的独立实体，而是利用函数的处理机制来实现闭包的特性。
所以，闭包是js的一种编程范式，是一种合理利用js解释器的一种范式。


# 作用

在JavaScript的模块化中，闭包起到了关键作用，主要体现在以下几个方面：

**1. 数据私有化**

闭包允许在函数内部创建私有变量和函数，外部无法直接访问，从而实现数据的封装和隐藏。这在模块化中非常重要，因为它可以保护模块内部的状态，防止外部代码意外修改。

**2. 防止命名冲突**

通过闭包，可以将模块的内部实现细节与外部接口分离，避免与全局作用域中的变量和函数发生命名冲突。这使得代码更加模块化和可维护。

**3. 持久化状态**

闭包可以用来保持模块的内部状态，允许模块在多次调用之间保留数据。例如，计数器、缓存等功能都可以通过闭包来实现。

**4. 创建工厂函数**

闭包可以用来创建工厂函数，通过调用这些函数生成具有私有状态的对象或模块实例。这种模式在需要多个相似但独立的实例时非常有用。

**5. 实现模块模式**

模块模式（Module Pattern）利用闭包来创建私有和公共成员，构造一个自包含的模块。典型的模块模式如下：


```js
var myModule = (function() {
  // 私有变量和函数
  var privateVariable = 'I am private';
  function privateFunction() {
      console.log(privateVariable);
  }
// 公共接口
	return {
    publicMethod: function() {
        privateFunction();
    }
};
})();

// 使用模块
myModule.publicMethod();  // 输出: I am private
```

**6. 立即调用函数表达式 (IIFE)**

IIFE是一种常见的闭包形式，用来创建一个独立的作用域。它在模块化开发中经常被使用，特别是在早期没有模块系统的情况下：

```js
(function() {
    var privateVar = 'This is private';
    // 其他代码
})();
```

这种模式可以确保代码不会污染全局作用域，并且可以立即执行。